"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[603],{2946:(t,e,i)=>{i.d(e,{S:()=>n});var n={model:{prop:"inputValue"},props:{errorClass:{default:"input-group-error",type:String},errorHideOnInput:{default:!0,type:Boolean},errorMessage:{default:"",type:String},inputAutofocus:{default:!1,type:Boolean},inputClass:{default:"input-group-input",type:String},inputDisabled:{default:!1,type:Boolean},inputId:{required:!0,type:String},inputName:{required:!0,type:String},inputRequired:{default:!1,type:Boolean},inputValue:{default:"",type:String|Number},inputWrapperClass:{default:"",type:String},labelClass:{default:"input-group-label",type:String},labelHidden:{default:!1,type:Boolean},labelText:{required:!0,type:String}},data:function(){return{hideError:!1}},computed:{formattedInputClass:function(){return this.isError?this.inputClass+" error":this.inputClass},formattedLabelClass:function(){var t=this.labelClass;return this.labelHidden&&(t+=" hidden"),t},isError:function(){return!(this.hideError||!this.errorMessage||""===this.errorMessage)}},methods:{autofocus:function(){var t=this;this.inputAutofocus&&this.$refs[this.inputId]&&this.$nextTick((function(){t.$refs[t.inputId].focus()}))},blurInput:function(){var t=this;this.$refs[this.inputId]&&this.$nextTick((function(){t.$refs[t.inputId].blur()}))},onErrorMessageChange:function(){this.hideError=!1},onInput:function(){this.$emit("input",this.$refs[this.inputId].value),this.errorHideOnInput&&(this.hideError=!0,this.$emit("errorHidden"))},onInputBlur:function(){this.$emit("blur")}},watch:{errorMessage:{handler:"onErrorMessageChange"}}}},5781:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(2946),r=i(1441);const s={name:"InputGroup",mixins:[n.S],components:{FormFieldError:r.Z},props:{inputAutocomplete:{default:"",type:String},inputMax:{default:"",type:String|Number},inputMaxLength:{default:"",type:String|Number},inputMin:{default:"",type:String|Number},inputMinLength:{default:"",type:String|Number},inputPlaceholder:{default:"",type:String},inputType:{default:"text",type:String}},mounted:function(){this.autofocus()}};const o=(0,i(1900).Z)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-col"},[i("label",{class:t.formattedLabelClass,attrs:{for:t.inputId}},[t._t("default",(function(){return[i("span",{staticClass:"flex flex-row items-baseline"},[i("span",[t._v(t._s(t.labelText))]),t._v(" "),t.inputRequired?i("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                    *\n                ")]):t._e()])]}))],2),t._v(" "),i("div",{class:t.inputWrapperClass},[t._t("inputPrepend"),t._v(" "),i("input",{ref:t.inputId,class:t.formattedInputClass,attrs:{id:t.inputId,autocomplete:t.inputAutocomplete,disabled:t.inputDisabled,max:t.inputMax,maxlength:t.inputMaxLength,min:t.inputMin,minlength:t.inputMinLength,name:t.inputName,placeholder:t.inputPlaceholder,required:t.inputRequired,type:t.inputType},domProps:{value:t.inputValue},on:{blur:t.onInputBlur,input:t.onInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.blurInput.apply(null,arguments)}}}),t._v(" "),t._t("inputAppend")],2),t._v(" "),i("form-field-error",{attrs:{"error-class":t.errorClass,"error-message":t.errorMessage,"is-error":t.isError}})],1)}),[],!1,null,null,null).exports},1441:(t,e,i)=>{i.d(e,{Z:()=>r});const n={name:"FormFieldError",props:{errorClass:{required:!0,type:String},errorMessage:{required:!0,type:String},isError:{required:!0,type:Boolean},transitionName:{default:"slide-down-fade",type:String}}};const r=(0,i(1900).Z)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:t.transitionName}},[t.isError?i("p",{class:t.errorClass},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]):t._e()])],1)}),[],!1,null,null,null).exports},603:(t,e,i)=>{i.r(e),i.d(e,{default:()=>f});var n=i(6486),r=i.n(n),s=i(9680),o=i(5781),a=i(6788),l=i(2946),p=i(1441);const u={name:"SelectGroup",mixins:[l.S],components:{FormFieldError:p.Z},props:{inputAnyOptionEnabled:{default:!1,type:Boolean},inputAnyOptionLabel:{default:"Any",type:String},inputAnyOptionClass:{default:"text-theme-base-subtle-contrast",type:String},inputAnyOptionValue:{default:""},inputClass:{default:"border border-theme-base-subtle cursor-pointer font-medium form-select px-3 py-2 rounded w-full focus:border-theme-primary focus:outline-none focus:ring-0 focus:shadow-none",type:String},inputOptionExact:{default:!1,type:Boolean},inputOptionLabelKey:{default:!1,type:Boolean|String|Number},inputOptionValueKey:{default:!1,type:Boolean|String|Number},inputOptions:{required:!0,type:Array|Object}},computed:{formattedOptions:function(){var t=this,e={};return Array.isArray(this.inputOptions)?r().forEach(this.inputOptions,(function(t){e[t]={label:t,value:t}})):r().forEach(this.inputOptions,(function(i,n){var r=i,s=n;!1!==t.inputOptionLabelKey&&i.hasOwnProperty(t.inputOptionLabelKey)&&(r=i[t.inputOptionLabelKey]),!1!==t.inputOptionValueKey&&i.hasOwnProperty(t.inputOptionValueKey)&&(s=i[t.inputOptionValueKey]),e[n]={label:r,value:s}})),e},formattedInputClass:function(){var t=this.inputClass;return this.isError&&(t+=" error"),this.isAnyOptionSelected&&(t+=" "+this.inputAnyOptionClass),t},isAnyOptionSelected:function(){return this.inputValue===this.inputAnyOptionValue||null===this.inputValue}},mounted:function(){this.autofocus()},methods:{isOptionDisabled:function(t){return!!this.inputRequired&&""===t},isOptionSelected:function(t){return this.inputOptionExact?t===this.inputValue:t==this.inputValue}}};var d=i(1900);const c=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-col"},[i("label",{class:t.formattedLabelClass,attrs:{for:t.inputId}},[t._t("default",(function(){return[i("span",{staticClass:"flex flex-row items-baseline"},[i("span",[t._v(t._s(t.labelText))]),t._v(" "),t.inputRequired?i("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                    *\n                ")]):t._e()])]}))],2),t._v(" "),i("select",{ref:t.inputId,class:t.formattedInputClass,attrs:{id:t.inputId,disabled:t.inputDisabled,name:t.inputName,required:t.inputRequired},on:{change:t.onInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.blurInput.apply(null,arguments)}}},[t.inputAnyOptionEnabled?i("option",{attrs:{disabled:t.isOptionDisabled(t.inputAnyOptionValue)},domProps:{selected:t.isOptionSelected(t.inputAnyOptionValue),value:t.inputAnyOptionValue}},[t._v("\n            "+t._s(t.inputAnyOptionLabel)+"\n        ")]):t._e(),t._v(" "),t._l(t.formattedOptions,(function(e,n){return i("option",{key:t.inputId+"-option-"+e.value,attrs:{disabled:t.isOptionDisabled(e.value)},domProps:{selected:t.isOptionSelected(e.value),value:e.value}},[t._v("\n            "+t._s(e.label)+"\n        ")])}))],2),t._v(" "),i("form-field-error",{attrs:{"error-class":t.errorClass,"error-message":t.errorMessage,"is-error":t.isError}})],1)}),[],!1,null,null,null).exports,h={name:"AdminGitRepositoryIndex",components:{IconCheck:a.default,InputGroup:o.Z,SelectGroup:c},layout:"admin-layout",props:{gitProviders:Array,repositories:Object,searchOptions:Array|Object},data:function(){return{editableSearchOptions:{per_page:15,repository_git_provider:"",repository_is_private:"",repository_name_alias:""},isInitialised:!1}},computed:{repositoriesData:function(){return!(!this.repositories||!this.repositories.data||this.repositories.data.length<1)&&this.repositories.data},showActions:function(){return this.userCanAny(["repositories.edit","repositories.view"])},showPagination:function(){try{return this.repositories.meta.pagination.last_page>1}catch(t){return!1}}},mounted:function(){this.setSearchOptions(this.searchOptions)},methods:{getRepositoryProviderIcon:function(t){try{var e={Bitbucket:"icon-brand-bitbucket",GitHub:"icon-brand-github",GitLab:"icon-brand-gitlab"};return!!e[t.git_provider]&&e[t.git_provider]}catch(t){return!1}},onSearchOptionsUpdate:r().debounce((function(){!this.isInitialised&&(this.isInitialised=!0,this.repositoriesData)||s.Inertia.get(this.$route("admin.git.repositories.index"),this.editableSearchOptions,{only:["repositories"],preserveState:!0})}),500),setSearchOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={per_page:15,repository_git_provider:"",repository_is_private:"",repository_name_alias:""};try{r().forEach(t,(function(t,i){e[i]=t}))}catch(t){console.log(t)}this.editableSearchOptions=r().cloneDeep(e)}},watch:{editableSearchOptions:{deep:!0,handler:"onSearchOptionsUpdate"}}};const f=(0,d.Z)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[t._m(0),t._v(" "),i("div",{staticClass:"bg-white py-6 shadow-subtle rounded-lg"},[i("h1",{staticClass:"font-semibold px-6 text-gray-850"},[t._v("\n            Search\n            "),i("button",{staticClass:"\n                    text-sm text-theme-base-subtle-contrast\n                    focus:outline-none focus:text-theme-primary\n                    hover:text-theme-primary\n                ",on:{click:t.setSearchOptions}},[t._v("\n                (Clear)\n            ")])]),t._v(" "),i("div",{staticClass:"\n                flex flex-col items-center mt-4 px-6 space-y-4\n                md:flex-row md:space-y-0 md:space-x-8\n            "},[i("div",{staticClass:"w-full md:w-1/4"},[i("input-group",{attrs:{"input-autocomplete":"repository_name_search","input-class":"form-control form-control-short","input-id":"repository_name_alias","input-name":"repository_name_alias","input-placeholder":"Alias/Name","input-type":"text","label-hidden":!0,"label-text":"Name"},model:{value:t.editableSearchOptions.repository_name_alias,callback:function(e){t.$set(t.editableSearchOptions,"repository_name_alias",e)},expression:"editableSearchOptions.repository_name_alias"}})],1),t._v(" "),i("div",{staticClass:"w-full md:w-1/4"},[i("select-group",{attrs:{"label-hidden":!0,"label-text":"Git Provider","input-any-option-enabled":!0,"input-any-option-label":"Git Provider","input-class":"form-control form-control-short","input-id":"repository_git_provider","input-name":"repository_git_provider","input-options":t.gitProviders},model:{value:t.editableSearchOptions.repository_git_provider,callback:function(e){t.$set(t.editableSearchOptions,"repository_git_provider",e)},expression:"editableSearchOptions.repository_git_provider"}})],1),t._v(" "),i("div",{staticClass:"w-full md:w-1/4"},[i("select-group",{attrs:{"label-hidden":!0,"label-text":"Privacy","input-any-option-enabled":!0,"input-any-option-label":"Privacy","input-class":"form-control form-control-short","input-id":"repository_is_private","input-name":"repository_is_private","input-options":{0:"Public",1:"Private"}},model:{value:t.editableSearchOptions.repository_is_private,callback:function(e){t.$set(t.editableSearchOptions,"repository_is_private",e)},expression:"editableSearchOptions.repository_is_private"}})],1)]),t._v(" "),t.repositoriesData?[i("div",{staticClass:"block mt-8 overflow-x-auto w-full"},[i("table",{staticClass:"table table-hover table-striped w-full"},[i("thead",[i("tr",[i("th",{staticClass:"indicator-column"}),t._v(" "),i("th",[t._v("Alias/Name")]),t._v(" "),i("th",[t._v("Privacy")]),t._v(" "),i("th",[t._v("URL")]),t._v(" "),t.showActions?i("th"):t._e()])]),t._v(" "),i("tbody",t._l(t.repositoriesData,(function(e,n){return i("tr",{key:"repository-"+e.id},[i("td",{staticClass:"indicator-column"},[i(t.getRepositoryProviderIcon(e),{tag:"component",staticClass:"h-4 text-theme-base-subtle-contrast w-4"})],1),t._v(" "),i("td",[t._v("\n                                "+t._s(e.human_readable_name)+"\n                                "),i("br"),t._v(" "),i("span",{staticClass:"text-sm text-theme-base-subtle-contrast"},[t._v("\n                                    "+t._s(e.alias?e.name:"-")+"\n                                ")])]),t._v(" "),i("td",[i(e.is_private?"icon-lock":"icon-lock-open",{tag:"component",staticClass:"ml-2 w-4",class:e.is_private?"text-theme-danger-contrast":"text-theme-success-contrast"})],1),t._v(" "),i("td",[i("a",{staticClass:"hover:text-theme-primary",attrs:{"aria-label":"Repository URL",href:e.html_url,rel:"noopener noreferrer",target:"_blank"}},[t._v("\n                                    "+t._s(e.html_url)+"\n                                ")])]),t._v(" "),t.showActions?i("td",[i("div",{staticClass:"flex flex-row items-center justify-end -mx-1"},[t.userCanAny(["repositories.edit","repositories.view"])?i("inertia-link",{staticClass:"\n                                            flex flex-row items-center inline-flex mx-1 px-2 py-1 rounded text-theme-base-subtle-contrast text-sm tracking-wide\n                                            focus:outline-none focus:ring\n                                            hover:bg-theme-info hover:text-theme-info-contrast\n                                        ",attrs:{href:t.userCan("repositories.edit")?t.$route("admin.git.repositories.edit",e.id):t.$route("admin.git.repositories.show",e.id),title:"View Repository"}},[i(t.userCan("repositories.edit")?"icon-edit":"icon-eye",{tag:"component",staticClass:"w-4"})],1):t._e()],1)]):t._e()])})),0)])])]:i("p",{staticClass:"bg-theme-base-subtle mt-6 mx-6 px-6 py-4 rounded text-center text-theme-base-subtle-contrast"},[t._v("\n            No repositories\n        ")]),t._v(" "),t.showPagination?i("div",{staticClass:"flex flex-row justify-center mt-12 px-6"},[i("pagination",{attrs:{pagination:t.repositories.meta.pagination}})],1):t._e()],2)])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-row items-center mb-6"},[i("h1",{staticClass:"font-medium mr-auto text-lg"},[t._v("\n            Repositories\n        ")])])}],!1,null,null,null).exports}}]);